@using static CasosUso.DTOs.Enums
@{
    ViewData["Title"] = "Inicio – Agencia de Logística";
}
@{
    var rol = Context.Session.GetString("rol");
    bool isAuthenticated = !string.IsNullOrWhiteSpace(rol);
}

<header class="bg-light shadow-sm mb-5">
    <div class="container py-5 text-center">
        <h1 class="display-5 fw-bold">Agencia de Logística</h1>
        <p class="lead">Gestión simple de envíos urgentes y comunes</p>

        <a asp-controller="Envio" asp-action="Create"
           class="btn btn-primary btn-lg me-2">
            <i class="bi bi-plus-circle-fill me-1"></i>
            Crear Envío
        </a>

        <a asp-controller="Envio" asp-action="Index"
           class="btn btn-outline-secondary btn-lg">
            <i class="bi bi-list-check me-1"></i>
            Envíos en Proceso
        </a>
    </div>
</header>

<div class="container">
    <div class="row g-4">

        <div class="col-md-4">
            <div class="card h-100 border-primary">
                <div class="card-body text-center">
                    <i class="bi bi-truck fs-1 text-primary mb-3"></i>
                    <h5 class="card-title">Nuevo envío</h5>
                    <p class="card-text">
                        Registra rápidamente un envío URGENTE o COMÚN,
                        con validaciones integradas.
                    </p>
                    <a asp-controller="Envio" asp-action="Create"
                       class="stretched-link"></a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card h-100 border-success">
                <div class="card-body text-center">
                    <i class="bi bi-clock-history fs-1 text-success mb-3"></i>
                    <h5 class="card-title">En proceso</h5>
                    <p class="card-text">
                        Consulta los envíos actuales, agrega comentarios
                        o márcalos como finalizados.
                    </p>
                    <a asp-controller="Envio" asp-action="Index"
                       class="stretched-link"></a>
                </div>
            </div>
        </div>

        @if (isAuthenticated && (RolUsuario)int.Parse(rol) == RolUsuario.Administrador)
        {
            <div class="col-md-4">
                <div class="card h-100 border-warning">
                    <div class="card-body text-center">
                        <i class="bi bi-people fs-1 text-warning mb-3"></i>
                        <h5 class="card-title">Usuarios</h5>
                        <p class="card-text">
                            Alta, edición y baja de empleados o clientes
                            desde un panel unificado.
                        </p>
                        <a asp-controller="Usuario" asp-action="Index"
                           class="stretched-link"></a>
                    </div>
                </div>
            </div>
        }

    </div>
</div>

<footer class="border-top mt-5 py-3 bg-light">
    <div class="container text-center small text-muted">
        © @(DateTime.Now.Year) – Agencia de Logística • Obligatorio P3 universidad ORT
    </div>
</footer>
